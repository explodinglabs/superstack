#!/bin/bash

# Note we can't force the entry point of "caddy" like it's done in
# bin/postgres (psql). The reason is that psql's arguments all start with a
# dash, but caddy's don't (caddy run, caddy reload, caddy hash-password). For
# that reason you have to type bin/caddy caddy arg ...

# If input is coming from a pipe or file, use -T to disable tty
if [[ ! -t 0 ]]; then
  docker compose exec -T caddy "$@"
else
  docker compose exec -it caddy "$@"
fi
