#!/bin/bash
set -euo pipefail

if [[ $# -eq 0 ]]; then
  set -- shell
fi

IKORC_ARG=""
IKORC_PATH="${IKORC_PATH:-$HOME/.config/ikorc}"
[ -f "$IKORC_PATH" ] && IKORC_ARG="-v $IKORC_PATH:/home/.ikorc:ro"

docker compose run --rm -it --no-deps \
  $IKORC_ARG \
  iko "$@"
